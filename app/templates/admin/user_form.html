{% extends "admin/base.html" %}
{% block page_title %}{{ 'Edit User â€” ' ~ user.username if user else 'Add Admin User' }}{% endblock %}

{% block content %}
<div class="mb-4">
  <a href="{{ url_for('admin.users') }}" class="btn btn-sm btn-outline-light"><i class="fa-solid fa-arrow-left"></i> Back to Users</a>
</div>

<div class="card" style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-md);max-width:560px;">
  <div class="card-body p-4">
    <h3 class="mb-4">{{ 'Edit User' if user else 'Add Admin User' }}</h3>
    <form method="POST">
      {{ csrf_input() }}

      <div class="mb-3">
        <label class="form-label" for="username">Username</label>
        {% if user %}
        <input type="text" class="form-control" id="username" value="{{ user.username }}" disabled>
        <small class="text-muted">Username cannot be changed.</small>
        {% else %}
        <input type="text" class="form-control" id="username" name="username" placeholder="e.g. johndoe" required>
        {% endif %}
      </div>

      <div class="mb-3">
        <label class="form-label" for="email">Email</label>
        <input type="email" class="form-control" id="email" name="email" value="{{ user.email if user else '' }}" placeholder="admin@example.com" required>
      </div>

      <div class="mb-3">
        <label class="form-label" for="password">Password</label>
        <input type="password" class="form-control" id="password" name="password" placeholder="{{ 'Leave blank to keep current' if user else 'Min. 6 characters' }}" {% if not user %}required{% endif %} minlength="6">
        {% if user %}
        <small class="text-muted">Leave blank to keep the current password.</small>
        {% endif %}
      </div>

      <button type="submit" class="btn btn-primary"><i class="fa-solid fa-save"></i> {{ 'Save Changes' if user else 'Create User' }}</button>
    </form>
  </div>
</div>
{% endblock %}
